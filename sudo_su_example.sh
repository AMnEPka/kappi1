#!/usr/bin/env bash

# ПРИМЕР 1: Использование timeout для защиты от зависания
# Если команда не завершится за 10 секунд, она будет прервана
timeout 10 sudo su -c "команда" || {
    echo "Команда превысила таймаут или завершилась с ошибкой"
    exit 1
}

# ПРИМЕР 2: Использование sudo su -c для выполнения команды без интерактивной сессии
# Это самый безопасный способ - не требует интерактивного ввода
sudo su -c "id"  # Выполнить команду id от root

# ПРИМЕР 3: Если действительно нужно использовать sudo su, можно обернуть в timeout
# и автоматически выйти через echo
echo "exit" | timeout 10 sudo su || {
    echo "Команда зависла или превысила таймаут"
    exit 1
}

# ПРИМЕР 4: Выполнить несколько команд через sudo su
sudo su -c "
    команда1
    команда2
    команда3
"
