# SSH Script Runner

Веб-приложение для удаленного выполнения bash-скриптов на серверах через SSH.

## Возможности

✅ **Управление хостами**
- Добавление серверов с SSH подключением
- Поддержка аутентификации по паролю и SSH ключу
- Поддержка Linux и Windows серверов
- Редактирование и удаление хостов

✅ **Управление скриптами**
- Создание bash-скриптов в веб-интерфейсе
- Редактирование и удаление скриптов
- Предпросмотр содержимого скрипта

✅ **Выполнение скриптов**
- Выбор скрипта для выполнения
- Выполнение на нескольких хостах одновременно
- Асинхронное выполнение команд

✅ **История выполнений**
- Просмотр всех выполнений
- Детальные результаты для каждого хоста
- Отображение успешных и ошибочных выполнений

## Технологии

**Backend:**
- FastAPI - веб-фреймворк
- Motor - асинхронный драйвер MongoDB
- Paramiko - SSH клиент для Python
- Cryptography - шифрование паролей

**Frontend:**
- React 19 - UI библиотека
- Tailwind CSS - стилизация
- Shadcn UI - компоненты
- Axios - HTTP клиент

**Database:**
- MongoDB - хранение данных

## Использование

### 1. Добавление хоста

1. Перейдите на страницу "Хосты"
2. Нажмите "Добавить хост"
3. Заполните информацию:
   - Название (для идентификации)
   - Хост (IP адрес или доменное имя)
   - Порт (по умолчанию 22)
   - Имя пользователя
   - Тип аутентификации (пароль или SSH ключ)
   - ОС (Linux или Windows)
4. Сохраните

### 2. Создание скрипта

1. Перейдите на страницу "Скрипты"
2. Нажмите "Создать скрипт"
3. Введите:
   - Название скрипта
   - Описание (опционально)
   - Команды bash
4. Сохраните

### 3. Выполнение скрипта

1. Перейдите на страницу "Выполнение"
2. Выберите скрипт из списка
3. Выберите хосты для выполнения (можно несколько)
4. Нажмите "Выполнить"
5. Результаты появятся на странице "История"

### 4. Просмотр результатов

1. Перейдите на страницу "История"
2. Просмотрите все выполнения
3. Для каждого хоста будет показан:
   - Статус (успех/ошибка)
   - Вывод команды
   - Сообщения об ошибках (если есть)

## Безопасность

- Пароли шифруются с использованием Fernet (симметричное шифрование)
- SSH ключи хранятся в зашифрованном виде в базе данных
- Используется безопасное SSH соединение через библиотеку Paramiko

## API Endpoints

### Хосты
- `GET /api/hosts` - получить все хосты
- `POST /api/hosts` - создать хост
- `GET /api/hosts/{id}` - получить хост по ID
- `PUT /api/hosts/{id}` - обновить хост
- `DELETE /api/hosts/{id}` - удалить хост

### Скрипты
- `GET /api/scripts` - получить все скрипты
- `POST /api/scripts` - создать скрипт
- `GET /api/scripts/{id}` - получить скрипт по ID
- `PUT /api/scripts/{id}` - обновить скрипт
- `DELETE /api/scripts/{id}` - удалить скрипт

### Выполнение
- `POST /api/execute` - выполнить скрипт на хостах
- `GET /api/executions` - получить историю выполнений
- `GET /api/executions/{id}` - получить выполнение по ID

## Требования к хостам

### Для Linux серверов:
- Установлен OpenSSH Server
- Bash доступен
- Пользователь имеет права на выполнение команд

### Для Windows серверов:
- Установлен OpenSSH Server
- CMD или PowerShell доступны
- Пользователь имеет права на выполнение команд

## Примеры скриптов

### Информация о системе (Linux)
```bash
echo "System Information:"
echo "Date:" $(date)
echo "User:" $(whoami)
echo "Uptime:" $(uptime)
```

### Проверка диска (Linux)
```bash
df -h
du -sh /var/log/*
```

### Информация о системе (Windows)
```batch
systeminfo
echo %DATE% %TIME%
whoami
```

## Примечания

- Таймаут SSH соединения: 10 секунд
- Таймаут выполнения команды: 30 секунд
- Выполнение на множественных хостах происходит параллельно
- Все операции логируются

## Поддержка

Для вопросов и проблем создавайте issue в репозитории проекта.
