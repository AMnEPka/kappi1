# –ß–µ–∫–ª–∏—Å—Ç offline —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ

### –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [x] `docker-compose.offline.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∑ volume –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [x] `backend/Dockerfile` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [x] `frontend/Dockerfile.prod` - production build —Å nginx
- [x] `frontend/nginx.conf` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx

### –°–∫—Ä–∏–ø—Ç—ã
- [x] `scripts/build-offline.sh` - —Å–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤
- [x] `scripts/save-images.sh` - —ç–∫—Å–ø–æ—Ä—Ç –æ–±—Ä–∞–∑–æ–≤ –≤ tar.gz
- [x] `scripts/load-images.sh` - –∏–º–ø–æ—Ä—Ç –æ–±—Ä–∞–∑–æ–≤ –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —Ö–æ—Å—Ç–µ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] `OFFLINE-QUICKSTART.md` - –±—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- [x] `OFFLINE-DEPLOYMENT.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üîç –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã offline —Ä–µ–∂–∏–º–∞

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç offline

1. **Backend (FastAPI)**
   - –í—Å–µ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –æ–±—Ä–∞–∑ (requirements.txt)
   - –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Å—Ç—Ä–æ–µ–Ω –≤ –æ–±—Ä–∞–∑
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç pip install –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

2. **Frontend (React + Nginx)**
   - Production build –≤—ã–ø–æ–ª–Ω–µ–Ω –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞
   - –í—Å–µ npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —ç—Ç–∞–ø–µ build
   - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è nginx
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç npm/yarn –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

3. **MongoDB**
   - –ì–æ—Ç–æ–≤—ã–π –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫

### ‚ùå –ß—Ç–æ –ù–ï –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–∏ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

- Hot reload / development —Ä–µ–∂–∏–º
- –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
- `npm install` –∏–ª–∏ `pip install` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### üîë –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–ª–∏—á–∏—è

| –ê—Å–ø–µ–∫—Ç | Development (docker-compose.yml) | Offline (docker-compose.offline.yml) |
|--------|----------------------------------|--------------------------------------|
| –ö–æ–¥ | –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Å —Ö–æ—Å—Ç–∞ | –í—Å—Ç—Ä–æ–µ–Ω –≤ –æ–±—Ä–∞–∑ |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –ú–æ–≥—É—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ | –í—Å–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã |
| Frontend | Dev server (React) | Production build (Nginx) |
| –ò–Ω—Ç–µ—Ä–Ω–µ—Ç | –ú–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è | –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è |
| –†–∞–∑–º–µ—Ä | –ú–∞–ª–µ–Ω—å–∫–∏–π | ~1.3 GB (–≤—Å–µ –≤–∫–ª—é—á–µ–Ω–æ) |

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–æ—Å–æ–º

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–±—Ä–∞–∑–æ–≤
- [ ] –ó–∞–ø—É—â–µ–Ω `./scripts/build-offline.sh`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –æ–±—Ä–∞–∑—ã: `docker images | grep ssh-runner`
- [ ] –ó–∞–ø—É—â–µ–Ω `./scripts/save-images.sh`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∞—Ä—Ö–∏–≤—ã: `ls -lh docker-images/`

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `docker-compose.offline.yml`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `scripts/`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `docker-images/`
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω `.env` —Ñ–∞–π–ª (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

### –ù–∞ —Ü–µ–ª–µ–≤–æ–º —Ö–æ—Å—Ç–µ
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker (20.10+)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker Compose (2.0+)
- [ ] –ü–æ—Ä—Ç—ã 3000, 8001, 27017 —Å–≤–æ–±–æ–¥–Ω—ã
- [ ] –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ (~5GB –º–∏–Ω–∏–º—É–º)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ offline —Ä–µ–∂–∏–º–∞

–ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –î–û –ø–µ—Ä–µ–Ω–æ—Å–∞:

```bash
# 1. –°–±–æ—Ä–∫–∞
./scripts/build-offline.sh

# 2. –ó–∞–ø—É—Å–∫ –≤ offline —Ä–µ–∂–∏–º–µ
docker-compose -f docker-compose.offline.yml up -d

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
curl http://localhost:8001/api/hosts
curl http://localhost:3000

# 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.offline.yml down
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ù–ï–¢ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –¥–µ–ª–∞—é—Ç –≤–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã
docker-compose -f docker-compose.offline.yml exec backend sh -c "cat /etc/resolv.conf"
docker-compose -f docker-compose.offline.yml exec frontend sh -c "cat /etc/resolv.conf"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ "connection refused" –∫ –≤–Ω–µ—à–Ω–∏–º —Ö–æ—Å—Ç–∞–º
docker-compose -f docker-compose.offline.yml logs | grep -i "connection refused"
```

## üìä –†–∞–∑–º–µ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

- **MongoDB image**: ~700 MB
- **Backend image**: ~450 MB  
  - Python 3.11 base: ~180 MB
  - Dependencies: ~270 MB
- **Frontend image**: ~180 MB
  - Node base + build: ~150 MB
  - Nginx + static files: ~30 MB

**–ò—Ç–æ–≥–æ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞**: ~1.3 GB –≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ

## üÜò Troubleshooting

### "Cannot connect to Docker daemon"
```bash
sudo systemctl start docker
sudo systemctl enable docker
```

### "Port already in use"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã
netstat -tulpn | grep -E '3000|8001|27017'

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç—ã –≤ docker-compose.offline.yml
```

### –û–±—Ä–∞–∑—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∞—Ä—Ö–∏–≤—ã –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã
gunzip -t docker-images/*.tar.gz

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Ä—É—á–Ω—É—é
docker load < docker-images/backend.tar.gz
docker load < docker-images/frontend.tar.gz
docker load < docker-images/mongodb.tar.gz
```

### Frontend –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å nginx –ª–æ–≥–∏
docker-compose -f docker-compose.offline.yml logs frontend

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª—ã –µ—Å—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose -f docker-compose.offline.yml exec frontend ls -la /usr/share/nginx/html
```

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤:
- ‚úÖ –û–±—Ä–∞–∑—ã —Å–æ–±—Ä–∞–Ω—ã –∏ —É–ø–∞–∫–æ–≤–∞–Ω—ã
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–∫–ª—é—á–µ–Ω—ã
- ‚úÖ Offline —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ offline —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é!**
